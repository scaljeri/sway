<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src&#x2F;data&#x2F;field.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Sway.html">Sway</a></li>
            
                <li><a href="..&#x2F;classes/Sway.Bindable.html">Sway.Bindable</a></li>
            
                <li><a href="..&#x2F;classes/Sway.data.ActiveRecord.html">Sway.data.ActiveRecord</a></li>
            
                <li><a href="..&#x2F;classes/Sway.data.Field.html">Sway.data.Field</a></li>
            
                <li><a href="..&#x2F;classes/Sway.data.Model.html">Sway.data.Model</a></li>
            
                <li><a href="..&#x2F;classes/Sway.data.persistance.IndexedDbResult.html">Sway.data.persistance.IndexedDbResult</a></li>
            
                <li><a href="..&#x2F;classes/Sway.data.persistance.WebSql.html">Sway.data.persistance.WebSql</a></li>
            
                <li><a href="..&#x2F;classes/Sway.data.persistance.WebSqlResult.html">Sway.data.persistance.WebSqlResult</a></li>
            
                <li><a href="..&#x2F;classes/Sway.DI.html">Sway.DI</a></li>
            
                <li><a href="..&#x2F;classes/Sway.EventHub.html">Sway.EventHub</a></li>
            
                <li><a href="..&#x2F;classes/Sway.filter.Compress.html">Sway.filter.Compress</a></li>
            
                <li><a href="..&#x2F;classes/Sway.filter.Encrypt.html">Sway.filter.Encrypt</a></li>
            
                <li><a href="..&#x2F;classes/Sway.persistance.Cookie.html">Sway.persistance.Cookie</a></li>
            
                <li><a href="..&#x2F;classes/Sway.persistance.IndexedDb.html">Sway.persistance.IndexedDb</a></li>
            
                <li><a href="..&#x2F;classes/Sway.persistance.LocalStorage.html">Sway.persistance.LocalStorage</a></li>
            
                <li><a href="..&#x2F;classes/Sway.ux.D3Carousel.html">Sway.ux.D3Carousel</a></li>
            
                <li><a href="..&#x2F;classes/Sway.ux.Form.html">Sway.ux.Form</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src&#x2F;data&#x2F;field.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
window.Sway = window.Sway || {}; &#x2F;&#x2F; make sure it exists
window.Sway.data = window.Sway.data || {};

(function (ns) {
    &quot;use strict&quot;;

    &#x2F;**
     * A Field represents a single value of an {{#crossLink &quot;Sway.data.ActiveRecord&quot;}}{{&#x2F;crossLink}} model.
     * It can represent a simple field definition, or an association; an relation between two models.
     *
     *     var username   = new Field(&#x27;username&#x27;, { friendlyName: &#x27;User name&#x27; })
     *         , password = new Field(&#x27;password&#x27;, { type: &#x27;password&#x27;, friendlyName: &#x27;Password&#x27; })
     *         , address  = new Field(&#x27;address&#x27;,  { key: &#x27;address&#x27;, type: &#x27;belongs_to&#x27;, model: Sway.data.Address, friendlyName: &#x27;Address&#x27; }) ;
     *
     * Furthermore, a Field can also hold information about data transformation, which is used by the persistence layer
     *
     *     var accountInfo = new Field( &#x27;accountInfo&#x27;, { type: &#x27;BLOB&#x27;, friendLyName: &#x27;Account info&#x27;, transformers: [encryptFilter, compressFilter] }) ;
     *
     * &lt;h3&gt;Associations&lt;&#x2F;h3&gt;
     *
     * This Active Record implementation is based on the Ruby on Rails (RoR) &lt;a href=&quot;http:&#x2F;&#x2F;guides.rubyonrails.org&#x2F;association_basics.html&quot;&gt;ActiveRecord Associations&lt;&#x2F;a&gt;.&lt;br&gt;
     * The following associations are available:
     *
     * &lt;h4&gt;BELONGS_TO and HAS_ONE (THROUGH) Association&lt;&#x2F;h4&gt;
     * Assume an &#x27;Account&#x27; &lt;tt&gt;belongs\_to&lt;&#x2F;tt&gt; a &#x27;Supplier&#x27;. Or the other way around, a Supplier &lt;tt&gt;has\_one&lt;&#x2F;tt&gt; Account.
     * Furthermore, if an &#x27;Account&#x27; and &#x27;Supplier&#x27; both &lt;tt&gt;has\_one&lt;&#x2F;tt&gt; &#x27;AccountHistory&#x27;, it could look like this
     *
     *      var Account = new Sway.data.ActiveRecord( &#x27;Account&#x27;, storage, [
     *            new Sway.data.Relation({ key: &#x27;supplier&#x27;, type: &#x27;belongs_to&#x27;, model: &#x27;Supplier&#x27; }       &#x2F;&#x2F; creates a field &#x27;supplier_id&#x27;
     *            new Sway.data.Relation({ type: &#x27;has_one&#x27;, model: &#x27;AccountHistory&#x27; }                     &#x2F;&#x2F; AccountHistory should have a account_id field
     *            .....
     *      ]) ;
     *
     *      var Supplier = new Sway.data.ActiveRecord( &#x27;Supplier&#x27;, storage, [
     *           new Sway.data.Relation({ key: &#x27;account&#x27;, type: &#x27;has_one&#x27;, model: &#x27;Account&#x27; })
     *           new Sway.data.Relation({ key: &#x27;accountHistory&#x27;, type: &#x27;has_one&#x27;, through: &#x27;AccountHistory&#x27;, model: &#x27;Account&#x27; })
     *           ....
     *      ]) ;
     *
     *      var AccountHistory = new Sway.data.ActiveRecord( &#x27;AccountHistory&#x27;, storage, [
     *          new Sway.datat.Relation({ type: &#x27;belongs_to&#x27;, model: &#x27;Account&#x27; })                          &#x2F;&#x2F; creates an &#x27;account_id&#x27; field
     *          ...
     *      ]) ;
     *
     *      ...
     *      supplierRecord.accountHistory = someAccountHistories
     *
     * An &lt;tt&gt;belongs_to&lt;&#x2F;tt&gt; field is always required!!
     *
     * &lt;h4&gt;HAS_MANY (THROUGH)&lt;&#x2F;h4&gt;
     * This association define a one-to-many or a many-to-many relationship.
     *
     *      new Sway.data.Relation({ key: &#x27;orders&#x27;, type: &#x27;has_many&#x27;, model: &#x27;Order&#x27; }) ;            &#x2F;&#x2F; one-to-many
     *      new Sway.data.Relation({ key: &#x27;patients&#x27;, type: &#x27;has_many&#x27;, through: &#x27;Appointment&#x27;, model: &#x27;Patient&#x27; }) ;  &#x2F;&#x2F; many-to-many
     *
     * &lt;h4&gt;HAS_AND_BELONGS_TO_MANY&lt;&#x2F;h4&gt;
     * This relation is identical to &lt;tt&gt;HAS\_MANY THROUGH&lt;&#x2F;tt&gt; (many-to-many), except it doesn&#x27;t have a third model
     *
     *      new Sway.data.Relation({ key: &#x27;assemblies&#x27;, type: &#x27;has_and_belongs_to_many&#x27;, model: &#x27;Assembly&#x27; })
     *
     * And the association in the other moddel look like
     *
     *      new Sway.data.Relation({ key: &#x27;parts&#x27;, type: &#x27;has_and_belongs_to_many&#x27;, model: &#x27;Part&#x27; })
     *
     *
     * @class Sway.data.Field
     * @constructor
     * @param {String} key name of the field
     * @param {Object} [options] definition of this field
     *      @param {String}  [options.type=TEXT] type of the field or association
     *      @param {String}  [options.model] referenced model
     *      @param {String}  [options.through] specifies a join model. Only available for &lt;tt&gt;HAS\_ONE&lt;&#x2F;tt&gt; and &lt;tt&gt;HAS\_MANY&lt;&#x2F;tt&gt; associations
     *      @param {String}  [options.friendlyName] description of the field
     *      @param {Boolean} [options.PK=false] primary key field (there can only be one primary key field)
     *      @param {Boolean} [options.autoIncrement=true] Primary key field is auto-incremented (auto generated key)
     *      @param {Boolean} [options.index=false] put an index on the field
     *      @param {Boolean} [options.unique=false] unique field
     *      @param {Array}   [options.compoundIndex] names of the compound index it is part of.
     *      @param {Boolean} [options.required=false] a required field
     *      @param {Array}   [options.transformers] list of transformer objects. A transformer object can transform the data into a new form and also back
     * into its original form. Think of, zipping and unzipping or encrypting and decrypting
     *      @param {Array}   [options.validators] list of validation functions
     *&#x2F;
    var Field = function (key, options) {
        if (!options) {
            options = {};
        }
        for (var i in options) {
            this[i] = options[i];
        }
        this.key = key;
        this.type = options.type || &#x27;text&#x27;;  &#x2F;&#x2F; define default type
        this.isSearchable = true ;

        return Object.freeze(this);
    };

    &#x2F;* this function is called by ActiveRecord, which will also be the context&#x2F;this *&#x2F;
    function set(key, value) {
        this[key] = value ;
    }

    Field.prototype = {

        set: function(value) {

        },
        &#x2F;**
         * @method transform
         * @param {*} value value to be transformed
         * @param {Function} callback function called with the transformed data
         *&#x2F;
        transform: function (value, callback) {
            if (this.transformers) {
                transform(0, this.transformers, callback, value);
            }
            else {
                callback(value);
            }
        }
        &#x2F;**
         * @method validate
         * @param {*} value value to be validated
         * @return {Boolean}
         *&#x2F;, validate: function (value) {
            var i
                , ok = true;

            if (this.validators) {
                for (i = 0; i &lt; this.validators.length; i++) {
                    if (!this.validators[i].validate(value)) {
                        ok = false;
                        break;
                    }
                }
            }
            return ok;
        }, isField: function () {
            return true;
        }
        &#x2F;*
         * Returns the size of
         * @method size
         *&#x2F;
        &#x2F;*
         , getSize: function() {
         return this.state === &quot;uncompressed&quot; ? encodeURI(this._inputStr).split(&#x2F;%..|.&#x2F;).length - 1 : this._zippedBlob.size ;
         }
         *&#x2F;
    };

    function transform(index, transformers, callback, value) {
        if (transformers[index]) {
            transformers[index].transform(value, transform.bind(null, ++index, transformers, callback));
        }
        else {
            callback(value);
        }
    }

    ns.Field = Field;

})(window.Sway.data);



    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
